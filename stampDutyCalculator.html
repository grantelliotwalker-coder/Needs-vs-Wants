<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Upfront Property Costs ‚Äì Budget Needs vs Wants</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="description" content="Simple global upfront property cost helper. Estimate transfer or stamp tax as a % of price, add other costs, and see how your deposit stacks up." />

  <style>
    :root {
      --bg: #050816;
      --bg-elevated: #0b1020;
      --bg-soft: #11152a;
      --accent: #00c2ff;
      --accent-soft: rgba(0, 194, 255, 0.15);
      --text: #e5f4ff;
      --muted: #9aa6bd;
      --danger: #ff4d6a;
      --success: #32d788;
      --disabled: #555c72;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", sans-serif;
    }

    body {
      background: radial-gradient(circle at top, #101633 0, #050816 40%, #02040a 100%);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .app-shell {
      max-width: 960px;
      margin: 0 auto;
      width: 100%;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .app-header {
      padding: 10px 14px 6px;
      display: flex;
      flex-direction: column;
      gap: 8px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.06);
      background: linear-gradient(to right, rgba(0, 0, 0, 0.5), transparent);
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(12px);
    }

    .top-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 8px;
    }

    .brand {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .brand-title {
      font-size: 16px;
      text-transform: uppercase;
      letter-spacing: 0.08em;
      color: var(--muted);
    }

    .brand-tagline {
      font-size: 12px;
      color: var(--muted);
    }

    .header-actions {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .pill-button {
      border-radius: 999px;
      padding: 6px 12px;
      font-size: 13px;
      border: 1px solid rgba(255, 255, 255, 0.16);
      background: rgba(0, 0, 0, 0.4);
      color: var(--text);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      cursor: pointer;
      text-decoration: none;
      white-space: nowrap;
    }

    .pill-button-icon {
      width: 16px;
      height: 16px;
      border-radius: 999px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      background: rgba(0, 0, 0, 0.7);
    }

    .pill-button.donate {
      border-color: rgba(255, 255, 255, 0.32);
    }

    .pill-button.donate .pill-button-icon {
      color: #ffcf66;
    }

    .summary-toggle-button {
      border-radius: 999px;
      padding: 4px 10px;
      font-size: 11px;
      border: 1px solid rgba(255, 255, 255, 0.22);
      background: rgba(0, 0, 0, 0.4);
      color: var(--muted);
      cursor: pointer;
      text-decoration: none;
      white-space: nowrap;
    }

    .summary-toggle-button.active {
      color: var(--text);
      border-color: var(--accent);
      background: rgba(0, 194, 255, 0.18);
    }

    .app-main {
      flex: 1;
      display: flex;
      flex-direction: column;
      padding: 6px 12px 12px;
      gap: 10px;
    }

    .panel {
      padding: 10px 10px 12px;
      border-radius: 12px;
      background: radial-gradient(circle at top, rgba(255, 255, 255, 0.03), transparent);
      border: 1px solid rgba(255, 255, 255, 0.08);
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .panel-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      margin-bottom: 4px;
      gap: 8px;
    }

    .panel-title {
      font-size: 15px;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .panel-badge {
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 999px;
      background: var(--accent-soft);
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.08em;
    }

    .panel-subtitle {
      font-size: 11px;
      color: var(--muted);
    }

    .app-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
      gap: 10px;
    }

    @media (max-width: 768px) {
      .app-grid {
        grid-template-columns: minmax(0, 1fr);
      }

      input[type="text"],
      input[type="number"],
      select {
        font-size: 16px;
      }
    }

    .inputs-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
      gap: 8px;
      margin-top: 4px;
    }

    .field-group {
      display: flex;
      flex-direction: column;
      gap: 2px;
    }

    .field-label {
      font-size: 11px;
      color: var(--muted);
    }

    .field-inline {
      display: flex;
      gap: 4px;
      align-items: center;
    }

    input[type="text"],
    input[type="number"],
    select {
      width: 100%;
      background: #050816;
      border-radius: 8px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      padding: 7px 10px;
      color: var(--text);
      font-size: 13px;
      outline: none;
    }

    input[type="text"]:focus,
    input[type="number"]:focus,
    select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(0, 194, 255, 0.4);
    }

    .error-text {
      font-size: 11px;
      color: var(--danger);
      min-height: 14px;
      margin-top: 2px;
    }

    .calculate-btn {
      margin-top: 6px;
      background: var(--accent);
      border: none;
      color: #02040a;
      padding: 7px 14px;
      border-radius: 999px;
      font-weight: 600;
      font-size: 13px;
      cursor: pointer;
      box-shadow: 0 0 14px rgba(0, 194, 255, 0.5);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      white-space: nowrap;
    }

    .calculate-btn span.icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      border-radius: 999px;
      background: #02040a;
      color: var(--accent);
      font-size: 14px;
      font-weight: 700;
    }

    .summary-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 8px;
      align-items: center;
      padding-bottom: 4px;
    }

    .summary-card {
      background: rgba(5, 8, 22, 0.9);
      border-radius: 10px;
      padding: 8px 10px;
      border: 1px solid rgba(255, 255, 255, 0.08);
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 11px;
    }

    .summary-card-title {
      color: var(--muted);
      font-size: 11px;
    }

    .mini-row {
      display: flex;
      justify-content: space-between;
      align-items: baseline;
      font-size: 11px;
    }

    .mini-label {
      color: var(--muted);
    }

    .mini-value {
      font-weight: 600;
    }

    .mini-value.surplus {
      color: var(--success);
    }

    .mini-value.deficit {
      color: var(--danger);
    }

    .badge-pill {
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 999px;
      border: 1px solid rgba(255, 255, 255, 0.18);
      background: rgba(0, 0, 0, 0.4);
      color: var(--muted);
      white-space: nowrap;
    }

    .badge-pill.good {
      border-color: rgba(50, 215, 136, 0.7);
      color: var(--success);
    }

    .badge-pill.bad {
      border-color: rgba(255, 77, 106, 0.7);
      color: var(--danger);
    }

    .note {
      font-size: 10px;
      color: var(--muted);
      margin-top: 4px;
    }

    .hidden-box {
      margin-top: 6px;
      padding: 8px 8px 6px;
      border-radius: 10px;
      background: rgba(0, 0, 0, 0.4);
      border: 1px dashed rgba(255, 255, 255, 0.14);
      font-size: 11px;
      display: none;
    }

    .toggle-link {
      font-size: 11px;
      color: var(--muted);
      cursor: pointer;
      text-decoration: underline;
    }
  </style>
</head>
<body>
<div class="app-shell">
  <header class="app-header">
    <div class="top-row">
      <div class="brand">
        <div class="brand-title">Upfront Property Costs</div>
        <div class="brand-tagline">
          Rough transfer / stamp tax plus other upfront costs, for any country.
        </div>
      </div>

      <div class="header-actions">
        <a href="tools.html"
           class="summary-toggle-button active"
           id="backToTools">
          ‚Üê Tools
        </a>

        <a href="index.html"
           class="summary-toggle-button"
           id="backToMain">
          Main planner
        </a>

        <a href="https://buy.stripe.com/5kQaEY0dReTA8fT5FsgnK00"
           class="pill-button donate"
           id="donateLink"
           target="_blank"
           rel="noopener noreferrer">
          <span class="pill-button-icon">üíñ</span>
          Leave a tip
        </a>
      </div>
    </div>
  </header>

  <main class="app-main">
    <section class="panel">
      <div class="panel-header">
        <div>
          <div class="panel-title">
            Purchase details
            <span class="panel-badge">Global maths only</span>
          </div>
          <div class="panel-subtitle">
            Enter a rough transfer / stamp tax rate and other upfront costs for your local system.
          </div>
        </div>
      </div>

      <div class="inputs-grid">
        <div class="field-group">
          <div class="field-label">Purchase price</div>
          <div class="field-inline">
            <span style="font-size:12px;color:var(--muted);">$</span>
            <input id="priceInput" type="number" min="0" step="1000" placeholder="" />
          </div>
        </div>

        <div class="field-group">
          <div class="field-label">Transfer / stamp tax rate (approx %)</div>
          <div class="field-inline">
            <input id="taxRateInput" type="number" min="0" step="0.01" placeholder="" />
            <span style="font-size:12px;color:var(--muted);">%</span>
          </div>
          <div class="note">
            Use an approximate overall rate for your region (or an average of any tiers).
          </div>
        </div>

        <div class="field-group">
          <div class="field-label">Estimated discount on that tax (optional)</div>
          <div class="field-inline">
            <span style="font-size:12px;color:var(--muted);">$</span>
            <input id="taxDiscountInput" type="number" min="0" step="100" placeholder="" />
          </div>
          <div class="note">
            Put any first-home, principal-residence, or other relief here as a flat amount.
          </div>
        </div>

        <div class="field-group">
          <div class="field-label">Deposit available</div>
          <div class="field-inline">
            <span style="font-size:12px;color:var(--muted);">$</span>
            <input id="depositInput" type="number" min="0" step="1000" placeholder="" />
          </div>
        </div>

        <div class="field-group">
          <div class="field-label">Other upfront costs (legal, inspections, etc.)</div>
          <div class="field-inline">
            <span style="font-size:12px;color:var(--muted);">$</span>
            <input id="otherCostsInput" type="number" min="0" step="100" placeholder="" />
          </div>
        </div>

        <div class="field-group">
          <div class="field-label">Example annual property charge (optional %)</div>
          <div class="field-inline">
            <input id="annualRateInput" type="number" min="0" step="0.01" placeholder="" />
            <span style="font-size:12px;color:var(--muted);">%</span>
          </div>
          <div class="note">
            For simple ‚Äúannual property tax‚Äù comparisons, e.g. 0.3% per year.
          </div>
        </div>

        <div class="field-group">
          <div class="field-label">Comparison horizon (years)</div>
          <div class="field-inline">
            <input id="horizonInput" type="number" min="1" max="40" step="1" placeholder="" />
            <span style="font-size:12px;color:var(--muted);">years</span>
          </div>
        </div>
      </div>

      <div class="error-text" id="inputError"></div>

      <button class="calculate-btn" id="calcBtn">
        <span class="icon">‚ñ∂</span>
        Estimate upfront costs
      </button>

      <div class="note">
        Very rough global helper only. Does not know your local bands or exemptions; numbers are just the maths you enter.
      </div>
    </section>

    <div class="app-grid">
      <section class="panel">
        <div class="panel-header">
          <div>
            <div class="panel-title">Transfer tax vs annual charge</div>
            <div class="panel-subtitle">
              One-off transfer / stamp tax compared to an ongoing annual property charge.
            </div>
          </div>
        </div>

        <div class="summary-row">
          <div class="summary-card">
            <div class="summary-card-title">Transfer / stamp tax</div>
            <div class="mini-row">
              <span class="mini-label">Estimated tax before discount</span>
              <span id="dutyBase" class="mini-value">‚Äî</span>
            </div>
            <div class="mini-row">
              <span class="mini-label">Less discount (if any)</span>
              <span id="dutyDiscount" class="mini-value">‚Äî</span>
            </div>
            <div class="mini-row">
              <span class="mini-label">Estimated payable now</span>
              <span id="dutyAmount" class="mini-value">‚Äî</span>
            </div>
          </div>

          <div class="summary-card">
            <div class="summary-card-title">Annual charge comparison</div>
            <div class="mini-row">
              <span class="mini-label">Annual charge (if entered)</span>
              <span id="annualTax" class="mini-value">‚Äî</span>
            </div>
            <div class="mini-row">
              <span class="mini-label">Total over horizon</span>
              <span id="horizonTax" class="mini-value">‚Äî</span>
            </div>
            <div class="mini-row">
              <span class="mini-label">Which is smaller over that time?</span>
              <span id="compareTag" class="mini-value surplus">‚Äî</span>
            </div>
          </div>
        </div>

        <span class="toggle-link" id="detailsToggle">Show calculation notes</span>
        <div class="hidden-box" id="detailsBox">
          <strong>How this calculator works</strong>
          <ul>
            <li>Transfer / stamp tax is approximated as purchase price √ó your % rate, minus any flat discount you enter.</li>
            <li>The annual charge is a simple % of the same price, multiplied by the number of years you choose.</li>
            <li>No local thresholds, special schemes, or complex bands are built in; this is a generic maths tool only.</li>
          </ul>
        </div>
      </section>

      <section class="panel">
        <div class="panel-header">
          <div>
            <div class="panel-title">Upfront cash needed</div>
            <div class="panel-subtitle">
              See how your deposit stacks up once tax and other costs are added.
            </div>
          </div>
        </div>

        <div class="summary-card">
          <div class="summary-card-title">Cash summary</div>
          <div class="mini-row">
            <span class="mini-label">Deposit</span>
            <span id="sumDeposit" class="mini-value">‚Äî</span>
          </div>
          <div class="mini-row">
            <span class="mini-label">Transfer / stamp tax</span>
            <span id="sumDuty" class="mini-value">‚Äî</span>
          </div>
          <div class="mini-row">
            <span class="mini-label">Other costs</span>
            <span id="sumOther" class="mini-value">‚Äî</span>
          </div>
          <div class="mini-row">
            <span class="mini-label">Total cash required now</span>
            <span id="sumTotal" class="mini-value">‚Äî</span>
          </div>
          <div class="mini-row">
            <span class="mini-label">Short / extra cash</span>
            <span id="sumGap" class="mini-value surplus">‚Äî</span>
          </div>
        </div>

        <div style="margin-top:6px;display:flex;justify-content:space-between;align-items:center;gap:8px;flex-wrap:wrap;">
          <span class="note">Positive number means you have cash left after upfront costs.</span>
          <span id="gapBadge" class="badge-pill">‚Äî</span>
        </div>
      </section>
    </div>
  </main>
</div>

<script>
  const priceInput = document.getElementById("priceInput");
  const taxRateInput = document.getElementById("taxRateInput");
  const taxDiscountInput = document.getElementById("taxDiscountInput");
  const depositInput = document.getElementById("depositInput");
  const otherCostsInput = document.getElementById("otherCostsInput");
  const annualRateInput = document.getElementById("annualRateInput");
  const horizonInput = document.getElementById("horizonInput");
  const inputError = document.getElementById("inputError");
  const calcBtn = document.getElementById("calcBtn");

  const dutyBaseEl = document.getElementById("dutyBase");
  const dutyDiscountEl = document.getElementById("dutyDiscount");
  const dutyAmountEl = document.getElementById("dutyAmount");
  const annualTaxEl = document.getElementById("annualTax");
  const horizonTaxEl = document.getElementById("horizonTax");
  const compareTagEl = document.getElementById("compareTag");

  const sumDepositEl = document.getElementById("sumDeposit");
  const sumDutyEl = document.getElementById("sumDuty");
  const sumOtherEl = document.getElementById("sumOther");
  const sumTotalEl = document.getElementById("sumTotal");
  const sumGapEl = document.getElementById("sumGap");
  const gapBadgeEl = document.getElementById("gapBadge");

  const detailsToggle = document.getElementById("detailsToggle");
  const detailsBox = document.getElementById("detailsBox");

  function formatCurrency(amount) {
    if (!isFinite(amount)) return "‚Äî";
    return amount.toLocaleString(undefined, {
      style: "currency",
      currency: "USD",
      minimumFractionDigits: 0,
      maximumFractionDigits: 0
    });
  }

  function calculate() {
    const price = parseFloat(priceInput.value || "0");
    const taxRate = parseFloat(taxRateInput.value || "0");
    const taxDiscount = parseFloat(taxDiscountInput.value || "0");
    const deposit = parseFloat(depositInput.value || "0");
    const otherCosts = parseFloat(otherCostsInput.value || "0");
    const annualRate = parseFloat(annualRateInput.value || "0");
    const horizonYears = parseFloat(horizonInput.value || "0");

    if (!isFinite(price) || price <= 0) {
      inputError.textContent = "Enter a purchase price above 0.";
      priceInput.focus();
      return;
    }
    if (!isFinite(taxRate) || taxRate < 0) {
      inputError.textContent = "Tax rate cannot be negative.";
      taxRateInput.focus();
      return;
    }
    if (!isFinite(taxDiscount) || taxDiscount < 0) {
      inputError.textContent = "Discount cannot be negative.";
      taxDiscountInput.focus();
      return;
    }
    if (!isFinite(deposit) || deposit < 0) {
      inputError.textContent = "Deposit cannot be negative.";
      depositInput.focus();
      return;
    }
    if (!isFinite(otherCosts) || otherCosts < 0) {
      inputError.textContent = "Other costs cannot be negative.";
      otherCostsInput.focus();
      return;
    }
    if (!isFinite(annualRate) || annualRate < 0) {
      inputError.textContent = "Annual charge rate cannot be negative.";
      annualRateInput.focus();
      return;
    }
    if (!isFinite(horizonYears) || horizonYears <= 0) {
      inputError.textContent = "Enter a comparison horizon above 0 years.";
      horizonInput.focus();
      return;
    }

    inputError.textContent = "";

    const dutyBase = price * (taxRate / 100);
    const dutyDiscount = Math.min(taxDiscount, Math.max(dutyBase, 0));
    const duty = Math.max(dutyBase - dutyDiscount, 0);

    dutyBaseEl.textContent = formatCurrency(dutyBase);
    dutyDiscountEl.textContent = "-" + formatCurrency(dutyDiscount);
    dutyAmountEl.textContent = formatCurrency(duty);

    let annualTax = 0;
    let horizonTax = 0;

    if (annualRate > 0) {
      annualTax = price * (annualRate / 100);
      horizonTax = annualTax * horizonYears;

      annualTaxEl.textContent = formatCurrency(annualTax);
      horizonTaxEl.textContent = formatCurrency(horizonTax);

      if (horizonTax < duty) {
        compareTagEl.textContent = "Annual charge smaller over " + horizonYears + " years";
        compareTagEl.classList.remove("deficit");
        compareTagEl.classList.add("surplus");
      } else if (horizonTax > duty) {
        compareTagEl.textContent = "One-off tax smaller over " + horizonYears + " years";
        compareTagEl.classList.remove("surplus");
        compareTagEl.classList.add("deficit");
      } else {
        compareTagEl.textContent = "Roughly similar over " + horizonYears + " years";
        compareTagEl.classList.remove("surplus", "deficit");
      }
    } else {
      annualTaxEl.textContent = "‚Äî";
      horizonTaxEl.textContent = "‚Äî";
      compareTagEl.textContent = "Enter an annual % to compare";
      compareTagEl.classList.remove("surplus", "deficit");
    }

    sumDepositEl.textContent = formatCurrency(deposit);
    sumDutyEl.textContent = formatCurrency(duty);
    sumOtherEl.textContent = formatCurrency(otherCosts);

    const totalRequired = duty + otherCosts;
    const gap = deposit - totalRequired;

    sumTotalEl.textContent = formatCurrency(totalRequired);
    sumGapEl.textContent = formatCurrency(gap);

    if (gap >= 0) {
      sumGapEl.classList.remove("deficit");
      sumGapEl.classList.add("surplus");
      gapBadgeEl.textContent = "You have roughly enough for upfronts";
      gapBadgeEl.classList.remove("bad");
      gapBadgeEl.classList.add("good");
    } else {
      sumGapEl.classList.remove("surplus");
      sumGapEl.classList.add("deficit");
      gapBadgeEl.textContent = "Short on upfront cash";
      gapBadgeEl.classList.remove("good");
      gapBadgeEl.classList.add("bad");
    }
  }

  calcBtn.addEventListener("click", calculate);

  [priceInput, taxRateInput, taxDiscountInput, depositInput, otherCostsInput, annualRateInput, horizonInput].forEach(
    (el) => {
      el.addEventListener("keydown", (e) => {
        if (e.key === "Enter") calculate();
      });
    }
  );

  detailsToggle.addEventListener("click", () => {
    const open = detailsBox.style.display === "block";
    detailsBox.style.display = open ? "none" : "block";
    detailsToggle.textContent = open
      ? "Show calculation notes"
      : "Hide calculation notes";
  });
</script>
</body>
</html>
